class R2D2Step:
    step = "Create release branch"

    def __init__(self, repo, repo1, console, config):
        self.repo = repo
        self.repo1 = repo1
        self.console = console
        self.config = config

    def run(self):
        branch_exists = self.repo1.get_branch(
            f"release-{self.repo1.next_release_tag_x}"
        )
        if branch_exists:
            self.repo.pull()
            self.repo1.set_release_branch(f"release-{self.repo1.next_release_tag_x}")
        else:
            self.console.warning(
                f"Creating release branch 'release-{self.repo1.next_release_tag_x}'"
            )
            are_you_sure = self.console.confirm()
            if are_you_sure is False:
                self.console.error("Aborting")
                exit()
            self.repo1.create_branch(f"release-{self.repo1.next_release_tag_x}")
            self.repo.pull()
