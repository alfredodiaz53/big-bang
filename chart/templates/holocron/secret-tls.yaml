{{- $pkg := "holocron" }}
{{- if (get .Values.addons $pkg).enabled }}
{{- if (get .Values.addons $pkg).postgresql.enabled }}
{{- if (get .Values.addons $pkg).postgresql.tls.enabled }}
{{- if not (get .Values.addons $pkg).postgresql.tls.autoGenerated }}
apiVersion: v1
kind: Secret
metadata:
  name: tls
  namespace: {{ $pkg }}
  labels:
    {{- include "commonLabels" $ | nindent 4}}
type: generic
data:
  tls.crt: {{ .Values.addons.holocron.postgresql.tls.cert | b64enc }}
  tls.key: {{ .Values.addons.holocron.postgresql.tls.key | b64enc }}
{{- end }}
{{- end }}
{{- end }}
{{- end }}
